---
layout: docwithnav-pe-edge
title: ThingsBoard Edge PE v3.5.x upgrade instructions for Docker
description: ThingsBoard Edge PE v3.5.x upgrade guide for Docker
active-menu-item-click: "true"
breadcrumbs: true
breadcrumbs-steps: 2
breadcrumbs-show: 2
effective-url: '/docs/user-guide/install/pe/edge/upgrade-instructions/'
---

* TOC
{:toc}

{% include templates/edge/install/docker-backup-before-upgrade.md %}

## Upgrading Edge PE to 3.5.1.1

{% assign versionName = "3.5.1.1EDGEPE" %}
{% assign previousVersion = "3.5.1EDGEPE" %}
{% assign updateServerLink = "docker/v3-5-x/#upgrading-thingsboard-pe-to-351" %}
{% assign peDocsPrefix = "pe/" %}
{% include templates/edge/install/compatibility-warning-version.md %}

{% capture edge-previousVersion %}
These steps are applicable for Edge {{previousVersion}} version.
{% endcapture %}
{% include templates/info-banner.md content=edge-previousVersion %}

Execute the following command to pull **{{versionName}}** image:
```
docker pull thingsboard/tb-edge-pe:{{versionName}}
```
{: .copy-code}

Set the terminal in the directory which contains the "docker-compose.yml" file, and run the following command to stop and remove the currently running TB Edge container (if it's still running):
```
docker compose stop && docker compose rm mytbedge -f
```
{: .copy-code}

The next step creates a docker compose file for the **ThingsBoard Edge upgrade** process and runs the upgrade. Once the upgrade process is successfully completed, the TB Edge upgrade container is automatically stopped:

```
cat > docker-compose-upgrade.yml <<EOF && docker compose -f docker-compose-upgrade.yml up --abort-on-container-exit
version: '3.0'
services:
  mytbedge:
    restart: on-failure
    image: "thingsboard/tb-edge-pe:{{versionName}}"
    environment:
      SPRING_DATASOURCE_URL: jdbc:postgresql://postgres:5432/tb-edge
    volumes:
      - ~/.mytb-edge-data:/data
      - ~/.mytb-edge-logs:/var/log/tb-edge
    entrypoint: upgrade-tb-edge.sh
  postgres:
    restart: always
    image: "postgres:15"
    ports:
      - "5432"
    environment:
      POSTGRES_DB: tb-edge
      POSTGRES_PASSWORD: postgres
    volumes:
      - ~/.mytb-edge-data/db:/var/lib/postgresql/data
EOF
```
{: .copy-code.expandable-9}

Modify the **main docker compose file** (docker-compose.yml) for **ThingsBoard Edge** and update the image version:

```bash
sed -i 's|thingsboard/tb-edge-pe:{{previousVersion}}|thingsboard/tb-edge-pe:{{versionName}}|' docker-compose.yml
```
{: .copy-code}

To start this docker compose , run the following command:
```
docker compose up -d && docker compose logs -f mytbedge
```
{: .copy-code}

## Upgrading Edge PE to 3.5.1

{% assign versionName = "3.5.1EDGEPE" %}
{% assign previousVersion = "3.5.0EDGEPE" %}
{% assign updateServerLink = "docker/v3-5-x/#upgrading-thingsboard-pe-to-351" %}
{% assign peDocsPrefix = "pe/" %}
{% include templates/edge/install/compatibility-warning-version.md %}

{% capture edge-previousVersion %}
These steps are applicable for Edge {{previousVersion}} version.
{% endcapture %}
{% include templates/info-banner.md content=edge-previousVersion %}

Execute the following command to pull **{{versionName}}** image:
```
docker pull thingsboard/tb-edge-pe:{{versionName}}
```
{: .copy-code}

Set the terminal in the directory which contains the "docker-compose.yml" file, and run the following command to stop and remove the currently running TB Edge container (if it's still running):
```
docker compose stop && docker compose rm mytbedge -f
```
{: .copy-code}

The next step creates a docker compose file for the **ThingsBoard Edge upgrade** process and runs the upgrade. Once the upgrade process is successfully completed, the TB Edge upgrade container is automatically stopped:

```
cat > docker-compose-upgrade.yml <<EOF && docker compose -f docker-compose-upgrade.yml up --abort-on-container-exit
version: '3.0'
services:
  mytbedge:
    restart: on-failure
    image: "thingsboard/tb-edge-pe:{{versionName}}"
    environment:
      SPRING_DATASOURCE_URL: jdbc:postgresql://postgres:5432/tb-edge
    volumes:
      - ~/.mytb-edge-data:/data
      - ~/.mytb-edge-logs:/var/log/tb-edge
    entrypoint: upgrade-tb-edge.sh
  postgres:
    restart: always
    image: "postgres:15"
    ports:
      - "5432"
    environment:
      POSTGRES_DB: tb-edge
      POSTGRES_PASSWORD: postgres
    volumes:
      - ~/.mytb-edge-data/db:/var/lib/postgresql/data
EOF
```
{: .copy-code.expandable-9}

Modify the **main docker compose file** (docker-compose.yml) for **ThingsBoard Edge** and update the image version:

```bash
sed -i 's|thingsboard/tb-edge-pe:{{previousVersion}}|thingsboard/tb-edge-pe:{{versionName}}|' docker-compose.yml
```
{: .copy-code}

To start this docker compose , run the following command:
```
docker compose up -d && docker compose logs -f mytbedge
```
{: .copy-code}

## Upgrading Edge PE to 3.5.0

{% assign versionName = "3.5.0EDGEPE" %}
{% assign previousVersion = "3.4.3EDGEPE" %}
{% assign updateServerLink = "docker/v3-5-x/#upgrading-edge-pe-to-350" %}
{% assign peDocsPrefix = "pe/" %}
{% include templates/edge/install/compatibility-warning-version.md %}
{% capture edge-previousVersion %}
These steps are applicable for Edge {{previousVersion}} version.
{% endcapture %}
{% include templates/info-banner.md content=edge-previousVersion %}

Execute the following command to pull **{{versionName}}** image:
```
docker pull thingsboard/tb-edge-pe:{{versionName}}
```
{: .copy-code}

Set the terminal in the directory which contains the "docker-compose.yml" file, and run the following command to stop and remove the currently running TB Edge container (if it's still running):
```
docker compose stop && docker compose rm mytbedge -f
```
{: .copy-code}

The next step creates a docker compose file for the **ThingsBoard Edge upgrade** process and runs the upgrade. Once the upgrade process is successfully completed, the TB Edge upgrade container is automatically stopped:

```
cat > docker-compose-upgrade.yml <<EOF && docker compose -f docker-compose-upgrade.yml up --abort-on-container-exit
version: '3.0'
services:
  mytbedge:
    restart: on-failure
    image: "thingsboard/tb-edge-pe:3.5.0EDGE"
    environment:
      SPRING_DATASOURCE_URL: jdbc:postgresql://postgres:5432/tb-edge
    volumes:
      - ~/.mytb-edge-data:/data
      - ~/.mytb-edge-logs:/var/log/tb-edge
    entrypoint: upgrade-tb-edge.sh
  postgres:
    restart: always
    image: "postgres:15"
    ports:
      - "5432"
    environment:
      POSTGRES_DB: tb-edge
      POSTGRES_PASSWORD: postgres
    volumes:
      - ~/.mytb-edge-data/db:/var/lib/postgresql/data
  EOF
```
{: .copy-code.expandable-9}

Modify the **main docker compose file** (docker-compose.yml) for **ThingsBoard Edge** and update the image version:

```bash
sed -i 's|thingsboard/tb-edge-pe:{{previousVersion}}|thingsboard/tb-edge-pe:{{versionName}}|' docker-compose.yml
```
{: .copy-code}

To start this docker compose , run the following command:
```
docker compose up -d && docker compose logs -f mytbedge
```
{: .copy-code}

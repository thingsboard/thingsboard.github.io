{% if page.title %}{% assign title=page.title %}{% endif %}
{% if page.description %}{% assign description=page.description %}{% endif %}
{% assign docsTag = include.docsTag %}
{% assign productTag = include.productTag %}
{% assign githubLink = "https://github.com/thingsboard/thingsboard" %}
{% assign githubLabel = "Star thingsboard/thingsboard on GitHub" %}
{% assign platformQuery = "" %}
{% if docsTag %}
    {% assign platformQuery = "?platform=ce" %}
    {% if docsTag == "mqtt-broker" %}
        {% assign githubLink = "https://github.com/thingsboard/tbmq" %}
        {% assign githubLabel = "Star thingsboard/tbmq on GitHub" %}
    {% elsif docsTag == "mqtt-broker-pe" %}
        {% assign githubLink = "https://github.com/thingsboard/tbmq" %}
        {% assign githubLabel = "Star thingsboard/tbmq on GitHub" %}
    {% elsif docsTag == "gw" %}
        {% assign githubLink = "https://github.com/thingsboard/thingsboard-gateway" %}
        {% assign githubLabel = "Star thingsboard/thingsboard-gateway on GitHub" %}
    {% elsif docsTag == "edge" %}
        {% assign githubLink = "https://github.com/thingsboard/thingsboard-edge" %}
        {% assign githubLabel = "Star thingsboard/thingsboard-edge on GitHub" %}
        {% assign platformQuery = platformQuery | replace: "ce", "edge" %}
    {% elsif docsTag == "edge-pe" %}
        {% assign githubLink = "https://github.com/thingsboard/thingsboard-edge" %}
        {% assign githubLabel = "Star thingsboard/thingsboard-edge on GitHub" %}
        {% assign platformQuery = platformQuery | replace: "ce", "pe-edge" %}
    {% endif %}
    {% if docsTag == "pe" or docsTag == "mobile-pe" %}
        {% assign platformQuery = platformQuery | replace: "ce", "pe" %}
    {% endif %}
    {% if docsTag == "paas" %}
        {% assign platformQuery = platformQuery | replace: "ce", "paas" %}
    {% endif %}
    {% if docsTag == "paas-eu" %}
        {% assign foundProduct = site.data.products | where: "tag", "paas" %}
        {% assign platformQuery = platformQuery | replace: "ce", "paas-eu" %}
    {% else %}
        {% assign foundProduct = site.data.products | where: "tag", docsTag %}
    {% endif %}
    {% assign productInfo = foundProduct[0] %}
    {% unless page.customTitle == "true" %}
        {% assign customTitle = title | append: " | " %}
        {% assign customTitle = customTitle | append: productInfo.fulltitle %}
    {% endunless %}
{% elsif page.customTitle == "true" %}
    {% assign customTitle = title %}
{% endif %}
{% if productTag %}
    {% if productTag == "mqtt-broker" %}
        {% assign githubLink = "https://github.com/thingsboard/tbmq" %}
        {% assign githubLabel = "Star thingsboard/tbmq on GitHub" %}
    {% elsif productTag == "edge" %}
        {% assign githubLink = "https://github.com/thingsboard/thingsboard-edge" %}
        {% assign githubLabel = "Star thingsboard/thingsboard-edge on GitHub" %}
    {% endif %}
{% endif %}
<head>
    <meta charset="utf-8">
    <meta name="cf-2fa-verify" content="a08672380de15e9">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    {% if customTitle %}
    <title>{{ customTitle }}</title>
    {% seo title=false %}
    {% else %}
    {% seo %}
    {% endif %}
    {% if description %}
    <meta name="twitter:description" content="{{ description }}">
    {% endif %}
    {% if !page.no_canonical %}
    <link rel="canonical" href="https://thingsboard.io{{page.url}}">
    {% endif %}
    <link rel="shortcut icon" type="image/png" href="https://img.thingsboard.io/favicon.png">
    {% if page.url == '/' %}
    <link href="/css/critical.css" rel="stylesheet">
    {% elsif page.url contains '/docs/' or cssTag == 'docs' %}
    <link href="/css/docs.css" rel="stylesheet">
    {% elsif page.url contains '/products/' %}
    <link href="/css/products.css" rel="stylesheet">
    {% elsif page.url contains '/industries/' %}
    <link href="/css/industries.css" rel="stylesheet">
    {% elsif page.url contains '/partners/' %}
    <link href="/css/partners.css" rel="stylesheet">
    {% elsif page.url contains '/device-library/ce'
        or page.url contains '/device-library/pe'
        or page.url contains '/device-library/paas'
        or page.url contains '/device-library/edge'
        or page.url contains '/device-library/pe-edge'
        or page.url contains '/device-library/guidelines/' %}
    <link href="/css/device.css" rel="stylesheet">
    {% elsif page.url contains '/device-library/' %}
    <link href="/css/device-library.css" rel="stylesheet">
    {% elsif page.url contains '/use-cases/' or cssTag == 'use-case' %}
    <link href="/css/use-cases.css" rel="stylesheet">
    {% elsif page.url == '/pricing/' %}
    <link href="/css/pricing.css" rel="stylesheet">
    {% elsif page.url == '/company/' or page.url == '/careers/' or page.url == '/mediakit/' %}
    <link href="/css/company.css" rel="stylesheet">
    {% elsif page.url == '/device-management/' or page.url == '/monitoring-dashboard/' or page.url == '/asset-management/' %}
    <link href="/css/solutions.css" rel="stylesheet">
    {% elsif page.url contains '/case-studies/' %}
    <link href="/css/case-studies.css" rel="stylesheet">
    {% else %}
    <link href="/css/styles.css" rel="stylesheet">
    {% endif %}
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/qs/6.7.0/qs.min.js"></script>
    <script async defer src="https://cdnjs.cloudflare.com/ajax/libs/gifffer/1.5.0/gifffer.min.js"></script>
    <noscript>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&display=swap">
    </noscript>
    <script async defer>
        window.onload = function() {
            Gifffer();

            setCloudServerHref();
        }
    </script>
    <script async defer>
        function setCookie(name, value, attributes) {
            if (typeof document === 'undefined') {
                return
            }

            attributes = Object.assign({}, {path: '/'}, attributes)

            if (typeof attributes.expires === 'number') {
                attributes.expires = new Date(Date.now() + attributes.expires * 864e5)
            }
            if (attributes.expires) {
                attributes.expires = attributes.expires.toUTCString()
            }

            name = encodeURIComponent(name)
                .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)
                .replace(/[()]/g, escape)

            var stringifiedAttributes = ''
            for (var attributeName in attributes) {
                if (!attributes[attributeName]) {
                    continue
                }

                stringifiedAttributes += '; ' + attributeName

                if (attributes[attributeName] === true) {
                    continue
                }

                // Considers RFC 6265 section 5.2:
                // ...
                // 3.  If the remaining unparsed-attributes contains a %x3B (";")
                //     character:
                // Consume the characters of the unparsed-attributes up to,
                // not including, the first %x3B (";") character.
                // ...
                stringifiedAttributes += '=' + attributes[attributeName].split(';')[0]
            }

            return (document.cookie =
                name + '=' + writeCookieValue(value) + stringifiedAttributes)
        }

        function getCookie(name) {
            if (typeof document === 'undefined' || (arguments.length && !name)) {
                return
            }

            // To prevent the for loop in the first place assign an empty array
            // in case there are no cookies at all.
            var cookies = document.cookie ? document.cookie.split('; ') : []
            var jar = {}
            for (var i = 0; i < cookies.length; i++) {
                var parts = cookies[i].split('=')
                var value = parts.slice(1).join('=')

                try {
                    var found = decodeURIComponent(parts[0])
                    jar[found] = readCookieValue(value)

                    if (name === found) {
                        break
                    }
                } catch (e) {
                }
            }

            return name ? jar[name] : jar
        }

        function setCloudServerCookie(cookieValue) {
            setCookie("cloudServer", cookieValue, {expires: 365, path: '/'});
        }

        function setCloudServerHref() {
            const cloudServer = getCookie('cloudServer');
            if (cloudServer) {
                document.getElementById('cloud-documentation').href = cloudServer;
                const cloudProductOption = document.getElementById('cloud-product-option');
                if (cloudProductOption) {
                    const cloudProductOptionHref = cloudProductOption.href;
                    cloudProductOption.href = cloudProductOptionHref.replace('/docs/paas/', cloudServer);
                }
            }
        }
    </script>
    <script>
        (function () {
            if (typeof setCookie !== "function" || typeof getCookie !== "function") return;

            function setLastPlatformQuery(platformQuery) {
                setCookie("tb_last_platform_query", platformQuery, { expires: 365, path: "/" });
            }

            function getLastPlatformQuery() {
                return getCookie("tb_last_platform_query");
            }

            function normalizePlatformQuery(q) {
                if (!q) return "";
                q = String(q).trim();
                if (!q) return "";
                if (!q.startsWith("?")) q = "?" + q;
                return q;
            }

            function applyDeviceLibraryLink() {
                const link = document.getElementById("devices-link");
                if (!link) return;

                const generated = normalizePlatformQuery(link.getAttribute("data-platform-query"));
                const saved = normalizePlatformQuery(getLastPlatformQuery());

                if (generated) {
                    setLastPlatformQuery(generated);
                    link.href = "/device-library/" + generated;
                    return;
                }

                if (saved) {
                    link.href = "/device-library/" + saved;
                }
            }

            if (document.readyState === "loading") {
                document.addEventListener("DOMContentLoaded", applyDeviceLibraryLink);
            } else {
                applyDeviceLibraryLink();
            }
        })();
    </script>
    <script async defer>
        /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
        !function (a) {
            "use strict";
            var b = function (b, c, d) {
                function e(a) {
                    return h.body ? a() : void setTimeout(function () {
                        e(a)
                    })
                }

                function f() {
                    i.addEventListener && i.removeEventListener("load", f), i.media = d || "all"
                }

                var g, h = a.document, i = h.createElement("link");
                if (c) g = c; else {
                    var j = (h.body || h.getElementsByTagName("head")[0]).childNodes;
                    g = j[j.length - 1]
                }
                var k = h.styleSheets;
                i.rel = "stylesheet", i.href = b, i.media = "only x", e(function () {
                    g.parentNode.insertBefore(i, c ? g : g.nextSibling)
                });
                var l = function (a) {
                    for (var b = i.href, c = k.length; c--;) if (k[c].href === b) return a();
                    setTimeout(function () {
                        l(a)
                    })
                };
                return i.addEventListener && i.addEventListener("load", f), i.onloadcssdefined = l, l(f), i
            };
            "undefined" != typeof exports ? exports.loadCSS = b : a.loadCSS = b
        }("undefined" != typeof global ? global : this);

        /*! onloadCSS. (onload callback for loadCSS) [c]2017 Filament Group, Inc. MIT License */
        function onloadCSS(a, b) {
            function c() {
                !d && b && (d = !0, b.call(a))
            }

            var d;
            a.addEventListener && a.addEventListener("load", c), a.attachEvent && a.attachEvent("onload", c), "isApplicationInstalled" in navigator && "onloadcssdefined" in a && a.onloadcssdefined(c)
        }
    </script>
    <script>

        function jqueryDefer(method) {
            if (window.jQuery) {
                method();
            } else {
                setTimeout(function () {
                    jqueryDefer(method)
                }, 50);
            }
        }

        function jqueryUiDefer(method) {
            if (window.jQuery && window.jQuery.ui) {
                method();
            } else {
                setTimeout(function () {
                    jqueryUiDefer(method)
                }, 50);
            }
        }

        window.vis = (function () {
            var stateKey,
                eventKey,
                keys = {
                    hidden: "visibilitychange",
                    webkitHidden: "webkitvisibilitychange",
                    mozHidden: "mozvisibilitychange",
                    msHidden: "msvisibilitychange"
                };
            for (stateKey in keys) {
                if (stateKey in document) {
                    eventKey = keys[stateKey];
                    break;
                }
            }
            return function (c) {
                if (c) document.addEventListener(eventKey, c);
                return !document[stateKey];
            }
        })();

        function loadScript(src, callback) {
            var s, r, t;
            r = false;
            s = document.createElement('script');
            s.type = 'text/javascript';
            s.src = src;
            s.onload = s.onreadystatechange = function () {
                if (!r && (!this.readyState || this.readyState == 'complete')) {
                    r = true;
                    if (callback) {
                        callback();
                    }
                }
            };
            t = document.getElementsByTagName('script')[0];
            t.parentNode.insertBefore(s, t);
        }

        function loadCssAsync(src, callback) {
            var stylesheet = loadCSS(src);
            if (callback) {
                onloadCSS(stylesheet, callback);
            }
        }

        function loadNextScript(index, scriptsList, completeCallback) {
            if (index < scriptsList.length) {
                var script = scriptsList[index];
                if (script.type === 'script') {
                    loadScript(script.src, function () {
                        if (script.callback) {
                            script.callback();
                        }
                        index++;
                        loadNextScript(index, scriptsList, completeCallback);
                    });
                } else if (script.type === 'css') {
                    loadCssAsync(script.src, function () {
                        index++;
                        loadNextScript(index, scriptsList, completeCallback);
                    });
                }
            } else if (completeCallback) {
                completeCallback();
            }
        }

        var initialScriptsList = [
            {src: 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/all.min.css', type: 'css'},
            {src: 'https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css', type: 'css'},
            {src: 'https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js', type: 'script'},
            {src: '/js/jquery-2.2.0.min.js', type: 'script'},
            {src: '/css/jquery-ui.min.css', type: 'css'},
            {src: '/js/jquery-ui.min.js', type: 'script'},
            {src: '/js/jquery.vide.js', type: 'script'},
            {src: '/js/script.js', type: 'script'},
            {src: '/css/photoswipe.css', type: 'css'},
            {src: '/css/default-skin/default-skin.css', type: 'css'},
            {src: '/js/photoswipe.min.js', type: 'script'},
            {src: '/js/photoswipe-ui-default.min.js', type: 'script'}
        ];

        loadNextScript(0, initialScriptsList);

        jqueryDefer(function () {
            (function ($, win) {
                $.fn.inViewport = function (cb) {
                    return this.each(function (i, el) {
                        function visPx() {
                            var H = $(this).height(),
                                r = el.getBoundingClientRect(), t = r.top, b = r.bottom;
                            var result = cb.call(el, Math.max(0, t > 0 ? H - t : (b < H ? b : H)));
                            if (result) {
                                $(win).off("resize scroll", visPx);
                            }
                        }

                        visPx();
                        $(win).on("resize scroll", visPx);
                    });
                };
            }(jQuery, window));
        });

        function inViewportDefer(method) {
            if (window.jQuery && $.fn.inViewport) {
                method();
            } else {
                setTimeout(function () {
                    inViewportDefer(method)
                }, 50);
            }
        }

    </script>
    <script async defer>

        function checkGTagDataLayer() {
            return typeof window.dataLayer === "undefined" || !window.dataLayer.push;
        }
        function _gaLt(event) {
            /* If GTM is blocked or not loaded, or not main|middle|touch click then don't track */
            if (checkGTagDataLayer() || (event.which != 1 && event.which != 2)) {
                return;
            }
            var el = event.srcElement || event.target;

            while (el && (typeof el.tagName == 'undefined' || el.tagName.toLowerCase() != 'a' || !el.href)) {
                el = el.parentNode;
            }
            if (el && el.href && el.getAttribute('itemprop') !== 'contentUrl') {
                var link = el.href;
                if ((link.indexOf(location.host) == -1 || link.indexOf('.' + location.host) > 0) && !link.match(/^javascript\:/i)) {
                    var target = (el.target && !el.target.match(/^_(self|parent|top)$/i)) ? el.target : false;
                    if (event.ctrlKey || event.shiftKey || event.metaKey || event.which == 2) {
                        target = "_blank";
                    }

                    var hbrun = false; // tracker has not yet run
                    var hitBack = function () {
                        if (hbrun) return;
                        hbrun = true;
                        window.location.href = link;
                    };

                    if (target) {
                        gtag("event", "outgoing_links", {
                            "event_category": "Outgoing Links",
                            "event_label": link,
                            "value": document.location.pathname + document.location.search
                        });
                    } else {
                        event.preventDefault ? event.preventDefault() : event.returnValue = !1;
                        gtag("event", "outgoing_link", {
                            "event_category": "Outgoing Links",
                            "event_label": link,
                            "value": document.location.pathname + document.location.search,
                            "event_callback": hitBack
                        });

                        setTimeout(hitBack, 1000);
                    }
                }
            }
        }

        var _w = window;
        var _gaLtEvt = ("ontouchstart" in _w) ? "click" : "mousedown";
        _w.addEventListener ? _w.addEventListener("load", function () {
                document.body.addEventListener(_gaLtEvt, _gaLt, !1)
            }, !1)
            : _w.attachEvent && _w.attachEvent("onload", function () {
            document.body.attachEvent("on" + _gaLtEvt, _gaLt)
        });
    </script>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TGBNQXN');
    function gtag(){dataLayer.push(arguments)};
    </script>
    <script async defer>
        function Burger() {
            var header = $('header');
            var body = $('body');
            if (header.hasClass('opened-burger')) {
                header.removeClass('opened-burger');
                let subMenus = $('nav.head-menu > ul > li > div.centered-sub > ul.sub-menu');
                subMenus.removeClass('open-sub');
                body.css('overflow', '');
            } else {
                header.addClass('opened-burger');
                body.css('overflow', 'hidden');
            }
        }
    </script>
    <script async defer>

        jqueryDefer(function () {
            let menuElement = $('nav.head-menu > ul');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            let menuItems = $('nav.head-menu > ul > li');
            let indicator = $('nav.head-menu > ul + div.indicator');
            let subMenuActive = false;
            menuElement.on('mouseleave', function (event) {
                if (!$(event.relatedTarget).parents('div.sub-menu-container').length) {
                    setTimeout(function() {
                        if (!submenuContainer.is(':hover')) {
                            subMenuActive = false;
                            submenuContainer.removeClass('active bounds-transition');
                            $('nav.head-menu > div.sub-menu-container > div').removeClass('open');
                            menuItems.removeClass('active');
                            indicator.removeClass('left-transition active');
                        }
                    }, 200)
                }
            });
            submenuContainer.on('mouseleave', function (event) {
                if (!$(event.relatedTarget).parents('nav.head-menu > ul').length) {
                    subMenuActive = false;
                    submenuContainer.removeClass('active bounds-transition');
                    menuItems.removeClass('active');
                    indicator.removeClass('left-transition active');
                    $('nav.head-menu > div.sub-menu-container > div').removeClass('open');
                }
            });
            menuItems.each(function() {
                let item = $( this );
                let subMenuId = item.attr('data-submenu-id');
                item.on('mouseenter', function () {
                    setTimeout(function() {
                        if (item.is(':hover')) {
                            let submenus = $('nav.head-menu > div.sub-menu-container > div');
                            submenus.removeClass('open');
                            menuItems.removeClass('active');
                            item.addClass('active');
                            if (subMenuId) {
                                let targetSubMenu = $('nav.head-menu > div.sub-menu-container > div#'+subMenuId);
                                targetSubMenu.addClass('open');
                                submenuContainer.css('overflow', 'visible');
                                let offset = (item.outerWidth() - targetSubMenu.outerWidth()) / 2;
                                let left = item.position().left + offset;
                                let windowOverflow = window.innerWidth - (item.offset().left + offset + targetSubMenu.outerWidth());
                                indicator.css('opacity', 1);
                                let windowOverflowLeft = left + windowOverflow;
                                if (windowOverflow < 0) {
                                    left += windowOverflow;
                                } else if (windowOverflowLeft < 0) {
                                    left -= windowOverflowLeft;
                                }
                                submenuContainer.css('left', left + 'px');
                                if (!subMenuActive) {
                                    submenuContainer.addClass('active');
                                    indicator.addClass('active');
                                    subMenuActive = true;
                                } else {
                                    submenuContainer.addClass('bounds-transition');
                                    indicator.addClass('left-transition active');
                                }
                                indicator.css('left', item.position().left);
                                indicator.css('width', item.outerWidth());
                                submenuContainer.css('height', targetSubMenu.outerHeight() + 'px');
                                submenuContainer.css('width', targetSubMenu.outerWidth() + 'px');
                                submenuContainer.css('overflow', 'hidden');
                            } else {
                                if (subMenuActive) {
                                    submenuContainer.removeClass('active');
                                    subMenuActive = false;
                                }
                                indicator.css('opacity', 0);
                            }
                        }
                    }, 100)
                });
            });

            let isMobile = $('button.burger').css('display') === 'block';
            if (isMobile) {
                initMobileSubmenu();
            }

            $(window).resize(function(){
                let newIsMobile = $('button.burger').css('display') === 'block';
                if (isMobile !== newIsMobile) {
                    isMobile = newIsMobile;
                    if (isMobile) {
                        initMobileSubmenu();
                    } else {
                        restoreDesktopSubmenu();
                    }
                }
            });

            $( document ).ready(function() {
                // Rogue line numbers fix (don't show line numbers for 1 row)
                $('.rouge-gutter.gl').each(function() {
                    var lineNumbers = $(this).children('.lineno');
                    if (lineNumbers.text() === '1\n') {
                        $(this).css('display', 'none');
                    }
                });
                $('a#use-cases-link').click(function(e) {
                    let isMobile = $('button.burger').css('display') === 'block';
                    if (isMobile) {
                        e.preventDefault();
                        e.stopPropagation();
                        listburg('nav-cases');
                    }
                });
            });
        });

        function initMobileSubmenu() {

            var header = $('header');
            if (header.hasClass('opened-burger')) {
                var body = $('body');
                body.css('overflow', 'hidden');
            }

            let targetSubMenus = $('nav.head-menu > div.sub-menu-container > div');
            targetSubMenus.css('display', 'block');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            submenuContainer.removeClass('active');
            submenuContainer.css('display', 'none');

            targetSubMenus.each(function() {
                let subMenu = $( this );
                let subMenuId = subMenu.attr('id');
                let parent = $('nav.head-menu > ul > li.'+subMenuId);
                parent.append(subMenu);
            });
        }

        function restoreDesktopSubmenu() {
            var body = $('body');
            body.css('overflow', '');
            let targetSubMenus = $('nav.head-menu > ul > li > div');
            targetSubMenus.css('display', '');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            submenuContainer.removeClass('active');
            submenuContainer.css('display', 'block');
            let menuItems = $('nav.head-menu > ul > li');
            menuItems.removeClass('active');
            targetSubMenus.each(function() {
                let subMenu = $( this );
                submenuContainer.append(subMenu);
            });
        }

        function listburg(subMenuId) {
            let isMobile = $('button.burger').css('display') === 'block';
            if (isMobile) {
                let targetSubMenu = $('nav.head-menu > ul > li > div.centered-sub#'+subMenuId+' > ul.sub-menu');
                let isOpen = targetSubMenu.hasClass('open-sub');
                let subMenus = $('nav.head-menu > ul > li > div.centered-sub > ul.sub-menu');
                subMenus.removeClass('open-sub');
                if (!isOpen) {
                    targetSubMenu.addClass('open-sub');
                }
            }
        }
    </script>

    <script async defer>
        (function() {
            try {
                const url = new URL(window.location.href);
                let params = {};
                url.searchParams.forEach((value, key) => {
                    if (key.startsWith('utm_')) {
                        params[key] = value;
                    }
                });
                if (Object.keys(params).length > 0) {
                    localStorage.setItem('utm', JSON.stringify(params));
                }

                // FirstPromoter: capture fpr parameter
                const fpr = url.searchParams.get('fpr');
                if (fpr) {
                    localStorage.setItem('fpr', fpr);
                }
            } catch (e) {}
        })();
        document.addEventListener('DOMContentLoaded', function() {
            const utms = localStorage.getItem('utm');
            let searchParams = [];

            // UTM parameters
            if (utms) {
                let utm = {};
                try {
                    utm = JSON.parse(utms);
                } catch(e) {}
                searchParams = Object.keys(utm).map(key => `${key}=${encodeURIComponent(utm[key])}`);
            }

            // Add FirstPromoter' parameter
            const fpr = localStorage.getItem('fpr');
            if (fpr) {
                searchParams.push('fpr=' + encodeURIComponent(fpr));
            }

            const search = searchParams.join('&');
            if (search) {
                const links = document.links;

                const allowedDomains = [
                    'https://thingsboard.cloud',
                    'https://eu.thingsboard.cloud',
                    'https://license.thingsboard.io'
                ];

                Array.from(links).forEach(link => {
                    const currentHref = link.getAttribute('href');

                    if (currentHref && allowedDomains.some(domain => currentHref.startsWith(domain))) {
                        const separator = currentHref.includes('?') ? '&' : '?';
                        const newHref = `${currentHref}${separator}${search}`;
                        link.setAttribute('href', newHref);
                    }
                })
            }
        });
    </script>
</head>
<body>
<script>
    window.YGC_WIDGET_ID = "75819947-7e09-4851-b832-80943d96be91";
    (function() {
        var script = document.createElement('script');
        script.src = "https://widget.yourgpt.ai/script.js";
        script.id = 'yourgpt-chatbot';
        document.body.appendChild(script);
    })();
</script>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TGBNQXN"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header>
    <div class="logo-burger">
        <a href="https://u24.gov.ua/" target="_blank" class="support-ukraine">
            <img src="/images/support-ukraine-banner.webp" alt="Stand with Ukraine flag" width="48" height="31">
        </a>
        <a href="/" class="logo" aria-label="Link to homepage"></a>
        <button onclick="Burger()" class="burger"  aria-label="Burger menu"></button>
        <div id="githubButtonContainer" style="width: 110px;">
            <a class="github-button" href="{{ githubLink }}" data-show-count="true"
               aria-label="{{ githubLabel }}">Star</a>
        </div>
    </div>
    <nav class="head-menu">
        <ul>
            <li class="nav-products" data-submenu-id="nav-products">
                <span class="main-menu-link" onclick="listburg('nav-products')">Products</span>
            </li>
            <li class="nav-services" data-submenu-id="nav-services">
                <span class="main-menu-link" onclick="listburg('nav-services')">Services</span>
            </li>
            <li class="nav-cases" data-submenu-id="nav-cases">
                <a class="main-menu-link" id="use-cases-link" href="/iot-use-cases/" style="cursor: pointer;">Use Cases</a>
            </li>
            <li class="nav-customers" data-submenu-id="nav-customers">
                <span class="main-menu-link" onclick="listburg('nav-customers')">Customers</span>
            </li>
            <li class="nav-company" data-submenu-id="nav-company">
                <span class="main-menu-link" onclick="listburg('nav-company')">Company</span>
            </li>
            <li class="nav-partners" data-submenu-id="nav-partners">
                <span class="main-menu-link" onclick="listburg('nav-partners')">Partners</span>
            </li>
            <li class="nav-docs" data-submenu-id="nav-docs">
                <span class="main-menu-link" onclick="listburg('nav-docs')">Docs</span>
            </li>
            <li class="nav-devices">
                <a class="main-menu-link" id="devices-link" href="/device-library/?platform=ce" data-platform-query="{{ platformQuery }}" style="cursor: pointer;">
                    Device Library
                </a>
            </li>
            <li class="nav-blog">
                <a class="main-menu-link" id="blog-link" href="/blog/" style="cursor: pointer;">Blog</a>
            </li>
        </ul>
        <div class="indicator"><div class="head-arrow"></div><div class="line"></div><div class="sub-background"></div></div>

        <div class="sub-menu-container">
            <div id="nav-products" class="centered-sub">
                <ul class="sub-menu products">
                    <li class="sub-groups">
                        <div class="group">
                            <div class="column">
                                <p class="group-name">IoT platforms</p>
                                <a class="com-lnk" href="/">
                                    <img src="/images/thingsboard-cm-icon.svg" alt="Community Edition icon" width="32" height="32" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Community Edition</span>
                                        <p>Open-source platform</p>
                                    </div>
                                </a>
                            </div>
                            <div class="column">
                                <p class="group-name">&nbsp;</p>
                                <a class="prof-lnk" href="/products/thingsboard-pe/">
                                    <img src="/images/thingsboard-p-icon.svg" alt="Professional Edition icon" width="32" height="32" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Professional Edition</span>
                                        <p>Advanced IoT platform</p>
                                    </div>
                                </a>
                            </div>
                            <div class="column">
                                <p class="group-name">&nbsp;</p>
                                <a class="cloud-lnk" href="/products/paas/">
                                    <img src="/images/thingsboard-c-icon.svg" alt="Cloud icon" width="32" height="32" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Cloud</span>
                                        <p>Platform as a service</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="group">
                            <div class="column">
                                <p class="group-name">Product ecosystem</p>
                                <a class="edge-lnk" href="/products/thingsboard-edge/">
                                    <img src="/images/thingsboard-e-icon.svg" alt="Edge icon" width="32" height="32" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Edge</span>
                                        <p>Edge computing</p>
                                    </div>
                                </a>
                                <a class="gateway-lnk" href="/docs/iot-gateway/what-is-iot-gateway/">
                                    <img src="/images/gateway-icon.svg" alt="IoT Gateway icon" width="32" height="32" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">IoT Gateway</span>
                                        <p>Connect legacy protocols</p>
                                    </div>
                                </a>
                            </div>
                            <div class="column">
                                <p class="group-name">&nbsp;</p>
                                <a class="mobile-lnk" href="/products/mobile/">
                                    <img src="/images/tb-mobile-icon.svg" alt="Device icon" width="32" height="32" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Mobile Application</span>
                                        <p>IoT mobile product</p>
                                    </div>
                                </a>
                                <a class="mobile-pe-lnk" href="/products/mobile-pe/">
                                    <img src="/images/tb-pe-mobile-icon.svg" alt="PE Mobile Application icon" width="32" height="32" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">PE Mobile Application</span>
                                        <p>Advanced IoT mobile product</p>
                                    </div>
                                </a>
                            </div>
                            <div class="column">
                                <p class="group-name">&nbsp;</p>
                                <a class="mqtt-broker-lnk" href="/products/mqtt-broker/">
                                    <img src="/images/tbmq-icon.svg" alt="MQTT Broker icon" width="32" height="32" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">TBMQ</span>
                                        <p>Scalable MQTT broker</p>
                                    </div>
                                </a>
                                <a class="trendz-lnk" href="/products/trendz/">
                                    <img src="/images/trendz-icon.svg" alt="Trendz Analytics icon" width="32" height="32" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Trendz Analytics</span>
                                        <p>Data analytics and Prediction</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div id="nav-services" class="centered-sub">
                <ul class="sub-menu services">
                    <li class="sub-groups">
                        <div class="group">
                            <div class="column">
                                <a href="/services/development-services/">
                                    <img src="/images/development-services.svg" alt="Development services icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Development services</span>
                                        <p>IoT Solutions development</p>
                                    </div>
                                </a>
                                <a href="/services/support/">
                                    <img src="/images/support-icon.svg" alt="Support icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Support</span>
                                        <p>Support packages</p>
                                    </div>
                                </a>
                                <a href="/services/trainings/">
                                    <img src="/images/train-icon.svg" alt="Trainings icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Trainings</span>
                                        <p>ThingsBoard education courses</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div id="nav-cases" class="centered-sub">
                <ul class="sub-menu cases">
                    <li class="sub-groups">
                        <div class="group">
                            <div class="column">
                                <a href="/use-cases/smart-energy/">
                                    <img src="/images/case-eng-icon.svg" alt="Smart Energy icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Smart energy</span>
                                        <p>Energy monitoring and efficiency</p>
                                    </div>
                                </a>
                                <a href="/use-cases/environment-monitoring/">
                                    <img src="/images/case-env-icon.svg" alt="Environment Monitoring icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Environment monitoring</span>
                                        <p>Indoor & outdoor environment analysis</p>
                                    </div>
                                </a>
                                <a href="/use-cases/smart-office/">
                                    <img src="/images/case-off-icon.svg" alt="Smart Office icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Smart office</span>
                                        <p>Boost productivity & optimize resources</p>
                                    </div>
                                </a>
                                <a href="/use-cases/water-metering/">
                                    <img src="/images/case-wat-icon.svg" alt="Water Metering icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Water metering</span>
                                        <p>Water use analysis & fraud detection</p>
                                    </div>
                                </a>
                                <a href="/use-cases/smart-retail/">
                                    <img src="/images/case-ret-icon.svg" alt="Smart Retail icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Smart retail</span>
                                        <p>Food storage & safety monitoring</p>
                                    </div>
                                </a>
                            </div>
                            <div class="column">
                                <a href="/use-cases/smart-farming/">
                                    <img src="/images/case-fam-icon.svg" alt="Smart Farming icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Smart farming</span>
                                        <p>Remote soil & equipment monitoring</p>
                                    </div>
                                </a>
                                <a href="/use-cases/site-fleet-tracking/">
                                    <img src="/images/site-fleet-tracking-icon.svg" alt="Fleet Tracking icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Site fleet tracking</span>
                                        <p>Fleet tracking & management</p>
                                    </div>
                                </a>
                                <a href="/use-cases/health-care/">
                                    <img src="/images/case-health-care-icon.svg" alt="Health Care icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Health care</span>
                                        <p>Smart assisted living solution</p>
                                    </div>
                                </a>
                                <a href="/use-cases/smart-metering/">
                                    <img src="/images/case-met-icon.svg" alt="Smart Metering icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Smart metering</span>
                                        <p>Meter data collection & analysis</p>
                                    </div>
                                </a>
                                <a href="/use-cases/air-quality-monitoring/">
                                    <img src="/images/case-aq-icon.svg" alt="Air Quality Monitoring icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Air quality monitoring</span>
                                        <p>Monitor AQI using wide range of sensors</p>
                                    </div>
                                </a>
                            </div>
                            <div class="column">
                                <a href="/use-cases/smart-irrigation/">
                                    <img src="/images/smart-irrigation.svg" alt="Smart Irrigation icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Smart irrigation</span>
                                        <p>Soil moisture & irrigation control</p>
                                    </div>
                                </a>
                                <a href="/use-cases/waste-management/">
                                    <img src="/images/case-waste-icon.svg" alt="Waste Management icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Waste management</span>
                                        <p>Real-time waste management</p>
                                    </div>
                                </a>
                                <a href="/use-cases/tank-level-monitoring/">
                                    <img src="/images/case-level-icon.svg" alt="Tank Level Monitoring icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Tank level monitoring</span>
                                        <p>Fuel tank location & level monitoring</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="group">
                            <div class="column">
                                <p class="group-name">SCADA</p>
                                <a href="/use-cases/scada/">
                                    <img src="/images/case-scada-icon.svg" alt="SCADA icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Swimming pool</span>
                                        <p>Control industrial processes in real time</p>
                                    </div>
                                </a>
                            </div>
                            <div class="column">
                                <p class="group-name">&nbsp;</p>
                                <a href="/use-cases/scada-oil-and-gas-drilling-system/">
                                    <img src="/images/case-scada-drilling-system-icon.svg" alt="SCADA icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Oil and gas drilling system</span>
                                        <p>Control drilling operations</p>
                                    </div>
                                </a>
                            </div>
                            <div class="column">
                                <p class="group-name">&nbsp;</p>
                                <a href="/use-cases/scada-energy-management/">
                                    <img src="/images/case-scada-energy-management.svg" alt="SCADA icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Energy management</span>
                                        <p>Monitor & control energy systems</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div id="nav-customers" class="centered-sub">
                <ul class="sub-menu customers">
                    <li class="sub-groups">
                        <div class="group">
                            <div class="column">
                                <a class="small-link" href="/case-studies/">
                                    <img src="/images/case-studies.svg" alt="Case studeies icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Case studies</span>
                                    </div>
                                </a>
                                <a class="small-link" href="/industries/smart-energy/">
                                    <img src="/images/feedback.svg" alt="Clients feedback icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Clients feedback</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div id="nav-company" class="centered-sub">
                <ul class="sub-menu about">
                    <li class="sub-groups">
                        <div class="group">
                            <div class="column">
                                <a class="small-link" href="/company/">
                                    <img src="/images/about-s-icon.svg" alt="About Our Company icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Our company</span>
                                    </div>
                                </a>
                                <a class="small-link" href="/docs/contact-us/">
                                    <img src="/images/contact-s-icon.svg" alt="Contact Us icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Contact us</span>
                                    </div>
                                </a>
                                <a class="small-link" href="/mediakit/">
                                    <img src="/images/media-s-icon.svg" alt="Media Kit icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Media kit</span>
                                    </div>
                                </a>
                                <a class="small-link" href="/careers/">
                                    <img src="/images/careers-s-icon.svg" alt="Careers icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Careers</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div id="nav-partners" class="centered-sub">
                <ul class="sub-menu about">
                    <li class="sub-groups">
                        <div class="group">
                            <div class="column">
                                <a class="small-link" href="/partners/hardware/">
                                    <img src="/images/hard-s-icon.svg" alt="Hardware partners icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Hardware partners</span>
                                    </div>
                                </a>
                                <a class="small-link" href="/partners/distributors/">
                                    <img src="/images/dis-s-icon.svg" alt="Distributors icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Distributors</span>
                                    </div>
                                </a>
                                <a class="small-link" href="/partners/marketplace/">
                                    <img src="/images/marketplace-s-icon.svg" alt="Marketplace icon" width="24" height="24" loading="lazy">
                                    <div class="sub-text">
                                        <span class="item-heading">Marketplace</span>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div id="nav-docs" class="centered-sub">
                <ul class="sub-menu products">
                    <li class="sub-groups">
                        <div class="group">
                            <div class="column">
                                <p class="group-name">IoT platforms</p>
                                <a class="com-lnk" href="/docs/">
                                    <div class="sub-text">
                                        <span class="item-heading">Community Edition</span>
                                        <p>Open-source platform</p>
                                    </div>
                                </a>
                            </div>
                            <div class="column">
                                <p class="group-name">&nbsp;</p>
                                <a class="prof-lnk" href="/docs/pe/">
                                    <div class="sub-text">
                                        <span class="item-heading">Professional Edition</span>
                                        <p>Advanced IoT platform</p>
                                    </div>
                                </a>
                            </div>
                            <div class="column">
                                <p class="group-name">&nbsp;</p>
                                <a id="cloud-documentation" class="cloud-lnk" href="/docs/paas/" >
                                    <div class="sub-text">
                                        <span class="item-heading">Cloud</span>
                                        <p>Platform as a service</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="group">
                            <div class="column">
                                <p class="group-name">Product ecosystem</p>
                                <a class="edge-lnk" href="/docs/edge/">
                                    <div class="sub-text">
                                        <span class="item-heading">Edge</span>
                                        <p>Edge computing</p>
                                    </div>
                                </a>
                                <a class="gateway-lnk" href="/docs/iot-gateway/">
                                    <div class="sub-text">
                                        <span class="item-heading">IoT Gateway</span>
                                        <p>Connect legacy protocols</p>
                                    </div>
                                </a>
                            </div>
                            <div class="column">
                                <p class="group-name">&nbsp;</p>
                                <a class="mobile-lnk" href="/docs/mobile/">
                                    <div class="sub-text">
                                        <span class="item-heading">Mobile Application</span>
                                        <p>IoT mobile product</p>
                                    </div>
                                </a>
                                <a class="mobile-pe-lnk" href="/docs/pe/mobile/">
                                    <div class="sub-text">
                                        <span class="item-heading">PE Mobile Application</span>
                                        <p>Advanced IoT mobile product</p>
                                    </div>
                                </a>
                            </div>
                            <div class="column">
                                <p class="group-name">&nbsp;</p>
                                <a class="mqtt-broker-lnk" href="/docs/mqtt-broker/">
                                    <div class="sub-text">
                                        <span class="item-heading">TBMQ</span>
                                        <p>Scalable MQTT broker</p>
                                    </div>
                                </a>
                                <a class="trendz-lnk" href="/docs/trendz/">
                                    <div class="sub-text">
                                        <span class="item-heading">Trendz Analytics</span>
                                        <p>Data analytics and Prediction</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="head-buttons">
        <a id="Menu_Pricing" href="/pricing/" class="n-button price gtm_button">Pricing</a>
        <a id="Menu_TryItNow" href="/installations/" class="n-button try gtm_button">Try it now</a>
    </div>
</header>

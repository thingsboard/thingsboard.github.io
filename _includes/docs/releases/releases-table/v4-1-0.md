### ThingsBoard CE v4.1.0 (Jul 3, 2025)

**Major Improvements**

* Core & Rule Engine

  * [#12926](https://github.com/thingsboard/thingsboard/pull/12926) Cassandra 5.0 support by @smatvienko-tb
  * [#12925](https://github.com/thingsboard/thingsboard/pull/12925) ValKey 8.0 (alternative to Redis > 7.2) by @smatvienko-tb
  * [#13510](https://github.com/thingsboard/thingsboard/pull/13510) Calculated fields performance improvements by @irynamatveieva
  * [#13570](https://github.com/thingsboard/thingsboard/pull/13570) Memory usage improvements by @ViacheslavKlimov

* UI

  * [#13282](https://github.com/thingsboard/thingsboard/pull/13282) Units conversion by @vvlladd28
  * [#13529](https://github.com/thingsboard/thingsboard/pull/13529) Added unit conversion support in SCADA system by @ArtemDzhereleiko
  * [#13500](https://github.com/thingsboard/thingsboard/pull/13500) Improved knob control widgets by @vvlladd28
  * New UI Localization: Danish, Dutch, French, German, Greek, Italian, Norwegian, and Spanish by @OKhalkov

**Minor improvements**

* Core & Rule Engine

  * [#13324](https://github.com/thingsboard/thingsboard/pull/13324) Added MQTT version selection for rule nodes by @deaflynx
  * [#13272](https://github.com/thingsboard/thingsboard/pull/13272) Added Ability to use message timestamp for CF results by @irynamatveieva
  * [#13641](https://github.com/thingsboard/thingsboard/pull/13641) Added Missing fields for RPC message in cluster mode by @ShvaykaD
  * [#13541](https://github.com/thingsboard/thingsboard/pull/13541) Added Update cached device activity status only after a successful database save by @dskarzh
  * [#13322](https://github.com/thingsboard/thingsboard/pull/13322) Automatic relations creation between Rule Chains when adding a “Rule Chain” node by @ViacheslavKlimov
  * [#13262](https://github.com/thingsboard/thingsboard/pull/13262) Emit `ALARM_DELETE` event only after the delete operation completes by @dskarzh
  * [#13148](https://github.com/thingsboard/thingsboard/pull/13148) Make Kafka consumer properties configurable for overridden topic names by @AndriiLandiak
  * [#12616](https://github.com/thingsboard/thingsboard/pull/12616) Notification on resources shortage by @AndriiLandiak
  * [#13428](https://github.com/thingsboard/thingsboard/pull/13428) Separate rate limits (READ and WRITE) for Cassandra by @ShvaykaD
  * [#13541](https://github.com/thingsboard/thingsboard/pull/13541) Update cached device activity status only after a successful database save by @dskarzh
  * [#12257](https://github.com/thingsboard/thingsboard/pull/12257) Used TbMsgProto instead of ByteString by @YevhenBondarenko

* UI

  * [#13301](https://github.com/thingsboard/thingsboard/pull/13301) Added Trendz settings by @yuliaklochai
  * [#13279](https://github.com/thingsboard/thingsboard/pull/13279) Added LwM2M observe strategies by @nickAS21
  * [#13501](https://github.com/thingsboard/thingsboard/pull/13501) Added Ability to create/view relations to rule chains by @vvlladd28
  * [#13533](https://github.com/thingsboard/thingsboard/pull/13533) Added “Confirm OTA Update” title in OTA update confirmation dialog by @vvlladd28
  * [#13516](https://github.com/thingsboard/thingsboard/pull/13516) Added Missing validation for notification message length by @vvlladd28
  * [#13575](https://github.com/thingsboard/thingsboard/pull/13575) Changed MIME type for CSV export file by @vvlladd28
  * [#13442](https://github.com/thingsboard/thingsboard/pull/13442) Hide zero tooltip for time series charts by @ArtemDzhereleiko
  * [#13457](https://github.com/thingsboard/thingsboard/pull/13457) Implemented Radar widget common axes mode by @ArtemDzhereleiko
  * [#13231](https://github.com/thingsboard/thingsboard/pull/13231) Improved safety of customTranslation placeholder parsing by @maxunbearable
  * [#13552](https://github.com/thingsboard/thingsboard/pull/13552) Made last-day selection default in Range (Time Window History) by @ChantsovaEkaterina

* Edge

  * [#13494](https://github.com/thingsboard/thingsboard/pull/13494) Added calculated fields support for Edge by @jekka001

**Bug fixes**

* Core & Rule Engine

  * [#13064](https://github.com/thingsboard/thingsboard/pull/13064) Fixed alarm creation when having both attributes and telemetry in the alarm rule by @dashevchenko
  * [#12905](https://github.com/thingsboard/thingsboard/pull/12905) Fixed resource restoring in Version Control by @dashevchenko
  * [#13072](https://github.com/thingsboard/thingsboard/pull/13072) Fixed manually added telemetry not triggering alarm by @dashevchenko
  * [#13480](https://github.com/thingsboard/thingsboard/pull/13480) Fixed tenant ID resolving in OAuth2 mapper by @AndriiLandiak
  * [#13509](https://github.com/thingsboard/thingsboard/pull/13509) Fixed JSON argument handling in Calculated Fields by @irynamatveieva
  * [#13565](https://github.com/thingsboard/thingsboard/pull/13565) Fixed updating CF state when old telemetry sent by @irynamatveieva
  * [#13627](https://github.com/thingsboard/thingsboard/pull/13627) Fixed showing outdated system resource info on tenant level by @ViacheslavKlimov

* UI

  * [#13287](https://github.com/thingsboard/thingsboard/pull/13287) Fixed device profile → LwM2M transport observe strategy selector by @deaflynx
  * [#13426](https://github.com/thingsboard/thingsboard/pull/13426) Fixed validation of advanced button style for widget header action setting by @ArtemDzhereleiko
  * [#13474](https://github.com/thingsboard/thingsboard/pull/13474) Fixed saving checksum in OTA package config when using external URL by @vvlladd28
  * [#13504](https://github.com/thingsboard/thingsboard/pull/13504) Fixed SCADA connectors arrow color by @ArtemDzhereleiko
  * [#13508](https://github.com/thingsboard/thingsboard/pull/13508) Fixed full-screen mode in editors by @vvlladd28
  * [#13512](https://github.com/thingsboard/thingsboard/pull/13512) Fixed LwM2M Bootstrap display after saving by @vvlladd28
  * [#13515](https://github.com/thingsboard/thingsboard/pull/13515) Fixed XSS vulnerability when deleting state name by @vvlladd28
  * [#13517](https://github.com/thingsboard/thingsboard/pull/13517) Fixed details panel button freeze midway in Firefox by @vvlladd28
  * [#13519](https://github.com/thingsboard/thingsboard/pull/13519) Fixed visible elements behind widget preview by @vvlladd28
  * [#13520](https://github.com/thingsboard/thingsboard/pull/13520) Fixed LwM2M device profile object configuration checkbox alignment by @vvlladd28
  * [#13527](https://github.com/thingsboard/thingsboard/pull/13527) Fixed change detection in device profile transport configuration by @vvlladd28
  * [#13394](https://github.com/thingsboard/thingsboard/pull/13394) Fixed for widgetTitlePanel templateOutlet by @LeoMorgan113
  * [#13540](https://github.com/thingsboard/thingsboard/pull/13540) Hide zero-false tooltip for Rule Engine Statistics dashboard by @ArtemDzhereleiko
  * [#13550](https://github.com/thingsboard/thingsboard/pull/13550) Prevent deleting an (entity alias/filter) that’s still used in map widgets by @vvlladd28

* Transport

  * [#12876](https://github.com/thingsboard/thingsboard/pull/12876) Fixed FoTA updates in LwM2M by @nickAS21
  * [#13243](https://github.com/thingsboard/thingsboard/pull/13243) Fixed 404 error when accessing LwM2M Profile Transport Configuration with LwM2M disabled by @nickAS21
  * [#12799](https://github.com/thingsboard/thingsboard/pull/12799) Use LwM2M Object 19 to send OTA update metadata by @nickAS21

**New Contributors**

  * [#13145](https://github.com/thingsboard/thingsboard/pull/13145) @omahurin made their first contribution
  * [#13154](https://github.com/thingsboard/thingsboard/pull/13154) @tjg23 made their first contribution
  * [#13301](https://github.com/thingsboard/thingsboard/pull/13301) @yuliaklochai made their first contribution
  * [#13404](https://github.com/thingsboard/thingsboard/pull/13404) @sumin-denys made their first contribution
  * [#13367](https://github.com/thingsboard/thingsboard/pull/13367) @idealissst made their first contribution
  * [#13427](https://github.com/thingsboard/thingsboard/pull/13427) @Deesthortered made their first contribution

Full Changelog: [https://github.com/thingsboard/thingsboard/compare/v4.0.2...v4.1](https://github.com/thingsboard/thingsboard/compare/v4.0.2...v4.1)

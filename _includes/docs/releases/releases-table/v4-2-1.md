### ThingsBoard CE v4.2.1 (Oct 15, 2025)

Minor release with the following bug fixes and improvements:

**What's Changed**

* Core & Rule Engine

  * [#14068](https://github.com/thingsboard/thingsboard/pull/14068) AI Request Node: ability to attach files by @dashevchenko
  * [#14014](https://github.com/thingsboard/thingsboard/pull/14014) AI models: support for local AI models via Ollama by @dskarzh
  * [#14076](https://github.com/thingsboard/thingsboard/pull/14076) AI models: ability to change base URL to OpenAI by @dskarzh
  * [#14131](https://github.com/thingsboard/thingsboard/pull/14131) Fixed vulnerabilities by @ViacheslavKlimov

* UI

  * [#14072](https://github.com/thingsboard/thingsboard/pull/14072) Added 'General' resource type and entity list for AI rule node by @ArtemDzhereleiko
  * [#14066](https://github.com/thingsboard/thingsboard/pull/14066) Added support for UTF-8 symbols in export file name by @vvlladd28
  * [#13373](https://github.com/thingsboard/thingsboard/pull/13373) Added tooltip settings option to also show total value in stacked timeseries charts by @pgrisu
  * [#13350](https://github.com/thingsboard/thingsboard/pull/13350) Latest chart widgets: added setting to show total value in legend by @pgrisu
  * [#14083](https://github.com/thingsboard/thingsboard/pull/14083) Markdown widget: hide unused data settings block in configuration by @vvlladd28

* Bug Fixes

  * [#14037](https://github.com/thingsboard/thingsboard/pull/14037) Fixed API usage cycle reset by @dashevchenko
  * [#13941](https://github.com/thingsboard/thingsboard/pull/13941) Fixed occasional duplicated CF evaluations after TB restart by @irynamatveieva
  * [#14046](https://github.com/thingsboard/thingsboard/pull/14046) Fixed missing entity values in exported alarm data widget by @dashevchenko
  * [#14081](https://github.com/thingsboard/thingsboard/pull/14081) Fixed hidden options displaying when switching between Realtime and History in Timewindow by @ChantsovaEkaterina
  * [#13952](https://github.com/thingsboard/thingsboard/pull/13952) Fixed AI models help link by @ArtemDzhereleiko
  * [#13898](https://github.com/thingsboard/thingsboard/pull/13898) Fixed response format issue for AI rule node by @ArtemDzhereleiko
  * [#14027](https://github.com/thingsboard/thingsboard/pull/14027) Fixed XSS vulnerabilities in the Rule node by @mtsymbarov-del
  * [#13948](https://github.com/thingsboard/thingsboard/pull/13948) Fixed user name field retrieval in EDQS by @dashevchenko
  * [#14070](https://github.com/thingsboard/thingsboard/pull/14070) Fixed PUBACK not sent if publishing failed or duplicated if message contains multiple devices by @dashevchenko

**Full Changelog**: [https://github.com/thingsboard/thingsboard/compare/v4.2...v4.2.1](https://github.com/thingsboard/thingsboard/compare/v4.2...v4.2.1)


{% assign deviceName = page.title | remove: "How to connect " | remove: "to ThingsBoard?" %}
{% assign deviceVendorLink = "https://www.iotrouter.com/product/eg8200-competitive-edge-computing-gateway/" %}
{% assign thingsboardHost = "https://" | append: hostName %}
{% assign prerequisites = '
- <a href="' | append: deviceVendorLink | append: '" target="_blank">' | append: deviceName | append: '</a>
- [EG8200 gateway user manual](https://www.iotrouter.com/wp-content/uploads/pdf-down/EG%20and%20EV%20Series_Quick%20Start%20Instructions.pdf){:target="_blank"}
  '
  %}

![{{deviceName}}](/images/devices-library/{{page.deviceImageFileName}}){: style="float: left; max-width: 200px; max-height: 200px; margin: 0px 10px 0px 0px"}
**CPU**: 2 Cores A7@1.2G<br>
**Memory**: 512M<br>
**eMMC**: 4G<br>
**SD card**: 128Gmax（Optional)<br>
**Module**: Quectel-CAT4（4G)<br>
**System**: Linux Ubuntu 20.04.5<br>
**Network**: 4G/LAN/WAN/WiFi<br>
**Interface**: 2RS485/1RS232/2CAN/2DO/2DI/1USB<br>
**Industrial Protocol**: IEC104 / Modbus / OPC UA/ BACnet..<br>
**Network Protocol**: MQTT / HTTP / TCP

## Introduction

[EG8200]({{deviceVendorLink}}){: target="_blank"} series products are edge computing gateways launched by IOTRouter Chengdu. With its rich hardware interfaces, drag-and-drop programming method, Zero Code designconcept, convenient remote management and other characteristics, It can quickly, flexibly, accurately and efficiently respond to various IOT industry needs. 

EG series products abstract complex hardware interfaces, different industrial network protocols, etc. into Nodes one by one. Users can use these Nodes flexibly to replace the traditional complex and inefficient coding process by dragging and connecting. Really let customers focus on business logic and quickly create their own gateway equipment. The mission of EG series products is to continuously develop new Nodes to serve industry customers to adapt to the fragmentation of IOT industry needs.

## Prerequisites

To continue with this guide we will need the following:  
{{ prerequisites }}
- [ThingsBoard account]({{ thingsboardHost }}){: target="_blank"}

## Gateway connection

According to the official user manual and this guide you can connect the gateway to the networkandthismanual mainly implements a process that simulate data, assemble it into JSON format, and report it totheThingsBoard through MQTT. 

## Gateway configuration

**Step 1: Collect Modbus RTU data**

**A.** Wiring EG8200 with Sensor

![image](/images/devices-library/ready-to-go-devices/eg8200-gateway/wiring.png)

**B.** Visit default IP address 192.168.88.1.of EG8200 to Configure for reading temperature and humidity data.

{% assign collectModbusRTUData = '
    ===
        image: /images/devices-library/ready-to-go-devices/eg8200-gateway/1.png,
        title: Drag out a **modbus read** node.
    ===
        image: /images/devices-library/ready-to-go-devices/eg8200-gateway/2.png,
        title: Configure the sensor parameters and choose RS485-1.
    ===
        image: /images/devices-library/ready-to-go-devices/eg8200-gateway/3.png,
        title: Drag out the **inject node** and **debug node** from the left node bar to trigger the process.
    ===
        image: /images/devices-library/ready-to-go-devices/eg8200-gateway/4.png,
        title: Click the inject node will show that the temperature and humidity data of the sensor are printed in the log bar on the right.
'
%}

{% include images-gallery.liquid showListImageTitles="true" imageCollection=collectModbusRTUData %}

<br>
**Step 2: Encapsulate data to conform the platform**

The identifiers of the data points on the platform and the KEY names in JSON format reported by the EG8200 are consistent. Therefore, in this example, the data collected by the EG8200 is named as the KEY value for JSON formatting.

{% assign encapsulateDataToConformPlatform = '
    ===
        image: /images/devices-library/ready-to-go-devices/eg8200-gateway/5.png,
        title: The identifiers of the data points on the platform and the KEY names in JSON format reported by the EG8200 are consistent. Therefore, in this example, the data collected by the EG8200 is named as the KEY value for JSON formatting.
'
%}

{% include images-gallery.liquid imageCollection=encapsulateDataToConformPlatform %}

<br>
**Step 3: MQTT reporting**

Add a new MQTT publishing node, refer to the second step of platform configuration to configure the MQTT link information:

- **IP domain name**: thingsboard.cloud (Note: if you deploy thingsboard by yourself, fill in your own server IPdomainname)
- **Port**: 1883
- **Client ID**: Add the device id generated by the device platform
- **Username**: Add the access token generated by the device platform
- **Password**: Keep blank
- **Publish topic**: v1/devices/me/telemetry

{% assign mqttReporting = '
    ===
        image: /images/devices-library/ready-to-go-devices/eg8200-gateway/6.png,
        title: Add a new MQTT publishing node, refer to the second step of platform configuration to configure the MQTT link information.
'
%}

{% include images-gallery.liquid imageCollection=mqttReporting %}

## Platform configuration

**Step 1: Add device**

- Login to your ThingsBoard instance and go to the "Devices" page of the "Entities" section.
- Click on the "+" icon in the top right corner of the table and then select "Add new device" from drop-down menu.
- Enter a device name.
- Click "Add".

{% assign addDevice = '
    ===
        image: /images/devices-library/ready-to-go-devices/eg8200-gateway/7.png,
        title: Login to your ThingsBoard instance and go to the "Devices" page of the "Entities" section. Click on the "+" icon in the top right corner of the table and then select "Add new device" from drop-down menu.
    ===
        image: /images/devices-library/ready-to-go-devices/eg8200-gateway/8.png,
        title: Enter a device name and click "Add".
'
%}

{% include images-gallery.liquid imageCollection=addDevice %}

**Step 2: Configure MQTT**

Click on the created device and fill in the configuration information in the following figure into the gateway, where the device ID is the MQTT client ID and the access token is the MQTT username. 

{% assign configureMQTT = '
    ===
        image: /images/devices-library/ready-to-go-devices/eg8200-gateway/9.png,
        title: Click on the created device and fill in the configuration information in the following figure into the gateway.
    ===
        image: /images/devices-library/ready-to-go-devices/eg8200-gateway/10.png,
        title: The device ID is the MQTT client ID and the access token is the MQTT username.
'
%}

{% include images-gallery.liquid imageCollection=configureMQTT %}

**Step 3: Verify data transmission**

Click the created device and find the latest telemetry data received by the platform.

{% assign verifyDataTransmission = '
    ===
        image: /images/devices-library/ready-to-go-devices/eg8200-gateway/11.png,
        title: Click the created device and find the latest telemetry data received by the platform.
'
%}

{% include images-gallery.liquid imageCollection=verifyDataTransmission %}

## Conclusion

{% include /docs/devices-library/blocks/basic/conclusion-block.md %}
<table  style="width:250px;">
   <thead>
     <tr>
	 <td style="text-align: center"><strong><em>Since TB Version 2.1</em></strong></td>
     </tr>
   </thead>
</table> 

![image](/images/user-guide/rule-engine-2-0/pe/nodes/action-generate-report.png)

Generates report files by capturing target dashboard with specific configuration.

This node can be configured to use specific report configuration or take it from incoming message body.

Mode when report configuration is taken from message body usually is used when message is generated by [**Generate Report** Scheduler Event](/docs/{{peDocsPrefix}}user-guide/scheduler/#generate-report).

Generate Report node invokes [Reports Server](/docs/{{peDocsPrefix}}user-guide/reporting/#reports-server) to generate report file using specified dashboard.

Resulting report file is stored in DataBase using [File Storage](/docs/{{peDocsPrefix}}user-guide/file-storage/) feature and reference to this file is stored in **attachments** field of output message metadata.

**attachments** metadata field can be used by other Rule Nodes to get actual file from DataBase.
For instance [**To Email Node**](/docs/{{docsPrefix}}user-guide/rule-engine-2-0/transformation-nodes/#to-email-node) detects presence of this field and prepares email attachments
used by [**Send Email Node**](/docs/{{docsPrefix}}user-guide/rule-engine-2-0/external-nodes/#send-email-node) to send email with attachments.

Configuration:

![image](/images/user-guide/rule-engine-2-0/pe/nodes/action-generate-report-config.png)

- **Use system reports server** - if set, [Reports Server](/docs/{{peDocsPrefix}}user-guide/reporting/#reports-server) endpoint URL will be taken from system configuration (**thingsboard.yml**).
- **Reports server endpoint URL** - endpoint URL of [Reports Server](/docs/{{peDocsPrefix}}user-guide/reporting/#reports-server).
- **Use report config from message** - if set, report generation configuration will be taken from incoming message body.
- **Base URL** - base URL of ThingsBoard UI that should be accessible by Report Server.
- **Dashboard** - dashboard that will be used for report generation.
- **Dashboard state parameter value** - used to specify target dashboard state for report generation. Can be set automatically by clicking on right most button of the field and invoking **Select dashboard state** dialog.
- **Timezone** - timezone in which target dashboard will be presented in report.
- **Use dashboard time window** - if set, time window configured in the target dashboard will be used during report generation.
- **Time window** - specific dashboard time window that will be used during report generation.
- **Report name pattern** - file name pattern of generated report, can contain date-time pattern in form of `%d{date-time pattern}`. See [SimpleDateFormat](https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html) documentation for date-time pattern details.
- **Report type** - report file type, can be *PDF \| PNG \| JPEG*.
- **Use current user credentials** - if set, credentials of user created this report configuration will be used to open dashboard UI during report generation.
- **Customer user credentials** - target customer user whose credentials will be used to open dashboard UI during report generation.

**Generate Test Report** button is used for testing purposes. It invokes report generation process with provided configuration. Resulting report file will be automatically downloaded if the report generation will be successful.

Message will be routed via **Failure** chain in the following cases:

- When **Use report config from message** is set and incoming message does not contain valid report configuration JSON object.
- When [Reports Server](/docs/{{peDocsPrefix}}user-guide/reporting/#reports-server) is unavailable at the specified endpoint URL.
- When [Reports Server](/docs/{{peDocsPrefix}}user-guide/reporting/#reports-server) will fail generate report and return corresponding error message.

In other cases Message will be routed via **Success** chain.

